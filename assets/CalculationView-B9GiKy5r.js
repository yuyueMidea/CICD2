import{n as a,z as w,A as y,a as n,b as l,e as d,p as k,s as C,h as D,t as m,q as V,o}from"./vendor-Dl_ZJaQE.js";function b(u){return new Worker("/autoDeploy/assets/calculator.worker-FEYjYm_A.js",{name:u==null?void 0:u.name})}const T={class:"calculation-view"},W={key:0},j={key:1},B={key:2},M=Object.assign({name:"calcPage"},{__name:"CalculationView",setup(u){const t=a(null),r=a(!1),i=a(0),s=a(null),f=a(null),_=()=>{t.value=new b,t.value.onmessage=g=>{const{type:e,progress:c,result:p}=g.data;e==="progress"?i.value=c.toFixed(2):e==="result"&&(s.value=p.toFixed(4),f.value=new Date().toLocaleTimeString(),r.value=!1)}},v=a(5e8),x=()=>{t.value||_(),r.value=!0,i.value=0,s.value=null,t.value.postMessage({type:"start",data:{maxIterations:v.value}})};return w(()=>{t.value&&(t.value.terminate(),t.value=null)}),y(()=>{t.value}),(g,e)=>{const c=V("permission");return o(),n("div",T,[e[3]||(e[3]=l("h2",null,"耗时计算界面",-1)),!r.value&&!s.value?(o(),n("div",W,[k(l("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=p=>v.value=p),placeholder:"please input timeCount"},null,512),[[C,v.value]]),k((o(),n("button",{class:"btn",onClick:x},e[1]||(e[1]=[D("开始计算(管理员权限)")]))),[[c,"admin"]])])):d("",!0),r.value?(o(),n("div",j,[l("p",null,"计算进度: "+m(i.value)+"%",1),e[2]||(e[2]=l("p",null,"计算中... 可以切换到其他界面，计算不会中断",-1))])):d("",!0),s.value?(o(),n("div",B,[l("h3",null,"计算结果: "+m(s.value),1),l("p",null,"计算完成时间: "+m(f.value),1)])):d("",!0)])}}});export{M as default};
