import{p as n,l as _,a as y,m as w,n as x,b as u,d as l,q as v,t as c,o as r}from"./vendor-0UIWjnaV.js";function C(o){return new Worker("/autoDeploy/assets/calculator.worker-FEYjYm_A.js",{name:o==null?void 0:o.name})}const b={class:"calculation-view"},D={key:0},W={key:1},j={key:2},F=Object.assign({name:"calcPage"},{__name:"CalculationView",setup(o){const t=n(null),s=n(!1),i=n(0),a=n(null),d=n(null),m=()=>{t.value=new C,t.value.onmessage=p=>{const{type:e,progress:f,result:k}=p.data;e==="progress"?i.value=f.toFixed(2):e==="result"&&(a.value=k.toFixed(4),d.value=new Date().toLocaleTimeString(),s.value=!1)}},g=()=>{t.value||m(),s.value=!0,i.value=0,a.value=null,t.value.postMessage({type:"start",data:{maxIterations:5e8}})};return _(()=>{t.value&&(t.value.terminate(),t.value=null)}),y(()=>{t.value}),w(()=>{console.log("组件被激活，状态已保留")}),x(()=>{console.log("组件被缓存，但保持状态")}),(p,e)=>(r(),u("div",b,[e[1]||(e[1]=l("h2",null,"耗时计算界面",-1)),!s.value&&!a.value?(r(),u("div",D,[l("button",{onClick:g},"开始计算")])):v("",!0),s.value?(r(),u("div",W,[l("p",null,"计算进度: "+c(i.value)+"%",1),e[0]||(e[0]=l("p",null,"计算中... 可以切换到其他界面，计算不会中断",-1))])):v("",!0),a.value?(r(),u("div",j,[l("h3",null,"计算结果: "+c(a.value),1),l("p",null,"计算完成时间: "+c(d.value),1)])):v("",!0),e[2]||(e[2]=l("input",{type:"text"},null,-1)),e[3]||(e[3]=l("button",null,"111",-1))]))}});export{F as default};
